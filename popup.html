<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>+rep ID</title>
  <style>
    body{width:360px;min-height:500px;background:#0c0c14;color:#F8F3FF;font-family:-apple-system,BlinkMacSystemFont,system-ui,sans-serif;margin:0}
    .header{padding:24px;background:#050508;border-bottom:1px solid rgba(74,58,255,.2);display:flex;align-items:center;gap:14px}
    .header img{width:32px;height:32px}
    .content{padding:20px;background:#0c0c14}
  </style>
  <link rel="stylesheet" href="popup.css">
</head>
<body>

  <!-- Header -->
  <div class="header">
    <img src="icons/logo.png" alt="+rep ID">
    <div class="header-brand">
      <span class="header-title">+rep ID</span>
      <span class="header-tagline">ZK-Verified Reputation</span>
    </div>
    <button class="header-faq-btn" id="faqBtn" title="FAQ & Info">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
        <line x1="12" y1="17" x2="12.01" y2="17"/>
      </svg>
    </button>
  </div>

  <div class="content">

    <!-- Connect Section (disconnected state) -->
    <div class="connect-section" id="connectSection">
      <h2>Welcome to +rep ID</h2>
      <p>Connect your wallet to start</p>
      <button class="connect-btn" id="connectBtn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        Connect Wallet
      </button>
    </div>

    <!-- Wallet Section (connected state) -->
    <div class="section hidden" id="walletSection">
      <div class="card">
        <div class="wallet-row">
          <span class="wallet-address" id="walletAddress">0x...</span>
          <button class="disconnect-btn" id="disconnectBtn">Disconnect</button>
        </div>
      </div>
    </div>

    <!-- Stats Section -->
    <div class="section hidden" id="statsSection">
      <div class="section-title">Your Stats</div>
      <div class="stats-row">
        <div class="stat">
          <span class="stat-value given" id="tagsGiven">0</span>
          <span class="stat-label">Given</span>
        </div>
        <div class="stat">
          <span class="stat-value received" id="tagsReceived">0</span>
          <span class="stat-label">Received</span>
        </div>
        <div class="stat">
          <span class="stat-value score" id="repScore">0</span>
          <span class="stat-label">Score</span>
        </div>
      </div>
    </div>

    <!-- Current Profile -->
    <div class="section hidden" id="profileSection">
      <div class="section-title">Current Profile</div>
      <div class="card" id="profileCard">
        <div class="profile-empty" id="profileEmpty">
          Navigate to a profile page
        </div>
        <div class="profile-row hidden" id="profileInfo">
          <div class="profile-avatar" id="profileAvatar">?</div>
          <div class="profile-info">
            <div class="profile-name" id="profileName">@username</div>
            <div class="profile-platform" id="profilePlatform">platform</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tags -->
    <div class="section hidden" id="tagsSection">
      <div class="tags-header">
        <span class="section-title" style="margin-bottom: 0;">Profile Tags</span>
        <span class="tag-count" id="tagCount">0</span>
      </div>
      <div class="tags-list" id="tagsList">
        <div class="tags-empty">No tags yet</div>
      </div>
    </div>

  </div>

  <!-- Settings Modal -->
  <div class="modal hidden" id="settingsModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Settings</h3>
        <button class="modal-close" id="closeSettings">&times;</button>
      </div>
      <div class="modal-body">
        <div class="setting-item">
          <span class="setting-label">Show widget on profiles</span>
          <label class="toggle">
            <input type="checkbox" id="settingOverlay" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-item">
          <span class="setting-label">Auto-detect profiles</span>
          <label class="toggle">
            <input type="checkbox" id="settingAutoDetect" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- TX Modal -->
  <div class="modal hidden" id="txModal">
    <div class="modal-content">
      <div class="tx-modal">
        <div class="tx-icon pending" id="txIcon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 6v6l4 2"/>
          </svg>
        </div>
        <div class="tx-title" id="txTitle">Processing...</div>
        <div class="tx-message" id="txMessage">Please wait</div>
      </div>
    </div>
  </div>

  <!-- FAQ Modal -->
  <div class="modal hidden" id="faqModal">
    <div class="modal-content faq-modal">
      <div class="modal-header">
        <h3>About +rep ID</h3>
        <button class="modal-close" id="closeFaq">&times;</button>
      </div>
      <div class="modal-body faq-body">
        <div class="faq-section">
          <div class="faq-title">What is +rep ID?</div>
          <p>+rep ID is a decentralized reputation system that allows you to leave verifiable tags on any social media profile. All tags are cryptographically signed with your wallet and stored on-chain.</p>
        </div>
        
        <div class="faq-section">
          <div class="faq-title">How to use</div>
          <div class="faq-steps">
            <div class="faq-step">
              <span class="faq-step-num">1</span>
              <span>Connect your wallet (Phantom or MetaMask)</span>
            </div>
            <div class="faq-step">
              <span class="faq-step-num">2</span>
              <span>Navigate to any profile on supported platforms</span>
            </div>
            <div class="faq-step">
              <span class="faq-step-num">3</span>
              <span>Click the "Rep" button next to username</span>
            </div>
            <div class="faq-step">
              <span class="faq-step-num">4</span>
              <span>Choose positive/negative and write your tag</span>
            </div>
            <div class="faq-step">
              <span class="faq-step-num">5</span>
              <span>Sign with your wallet to submit</span>
            </div>
          </div>
        </div>
        
        <div class="faq-section">
          <div class="faq-title">Supported Platforms</div>
          <div class="faq-platforms">
            <span class="faq-platform">GitHub</span>
            <span class="faq-platform">X (Twitter)</span>
            <span class="faq-platform">Reddit</span>
            <span class="faq-platform">YouTube</span>
          </div>
        </div>
        
        <div class="faq-section">
          <div class="faq-title">ZK Privacy</div>
          <p>Your wallet address is visible, but your identity remains pseudonymous. Tags are verified using zero-knowledge proofs ensuring authenticity without exposing private data.</p>
        </div>
        
        <div class="faq-footer">
          <span>Version 1.0.0</span>
          <span>•</span>
          <span>Built with ❤️</span>
        </div>
      </div>
    </div>
  </div>

  <script src="config.js"></script>
  <script src="api.js"></script>
  <script src="popup.js"></script>
</body>
</html>
